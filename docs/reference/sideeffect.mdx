---
sidebar_position: 4
---

import ReferenceTable from '@site/src/components/generic/reference/table'

# Side Effect

## Data structure & behavior
- A side effect can be used at any step to change an object (usually the Formulaik payload) as a side effect of the step itself.
- A side effect can be applied following a template
- A side effect can be applied barring conditions 
- The side effects will be called sequentially as per their order in the array

Example
```json
"sideEffects": [
    {
    "position": "after",
    "type": "payload",
    "name": "databaseURI",
    "template": "mongodb://root:DATABASE_PASSWORD_TO_CHANGE@localhost:<%= appDatabasePort %>/app?authSource=admin&readPreference=primary&ssl=false",
    "conditions": [
        {
            "name": "appDatabaseType",
            "operator": "=",
            "operand": "mongodb"
        }
    ]
    }
]
```


## Create a side effect
Create a project-wide side effect in the form of a _cliNext file in <b>src/sideeffects</b>.

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },
                {
                    id: "acceptedValues",
                    label:"Accepted values", 
                },
                {
                    id: "example",
                    label:"Example", 
                },] 
        },
        rows: 
        [
            {
                parameter: "_formulaikType", 
                type: "string", 
                description: "Formulaik module type", 
                defaultValue: "transformer",
                mandatory: {
                    type: 'boolean',
                    value: true
                },
                acceptedValues: {
                    type: 'values',
                    value: ['transformer']
                },
            },
            {
                parameter: "position", 
                type: "string", 
                description: "The type of transformer. Can be in, out or display", 
                defaultValue: "transformer",
                mandatory:{
                    type: 'boolean',
                    value: true
                },
                acceptedValues: {
                    type: 'values',
                    value: ['in', 'out', 'display']
                },
            },
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "handler", 
                type: "function", 
                description: "The handler function.", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                },                
                example: {
                    type: 'element',
                    value: () => <bloc>{`handler: async ({ input, }) => {
                        return capitalizeFirstLetter(input)
                    }`}</bloc>
                },
            },]
    }} />

## Use

### File based

**Quick configuration**
You can pass the id of the transformer in the corresponding section of the <i>transformers</i> section.

```js
 sideeffects: ["mysideeffect"]
```

** Advanced **
You can pass the id of the transformer in the corresponding section of the <i>transformers</i> section.

```js
 sideeffects: [{
    id: "mySideEffect",
    params: {}
 }]
```

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

Example
```js

```

### Inline

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

<i>Example</i>

```js
 transformers: {
    out: ['myOutTransformerId']
  }
```

### Template

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

<i>Example</i>

```js
transformers: {
    out: [{
        template: `<%= destination %>/<%= featureId %>`
    }]
}
```